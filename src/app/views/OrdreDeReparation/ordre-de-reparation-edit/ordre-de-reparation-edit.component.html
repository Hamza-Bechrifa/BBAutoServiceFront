<p>ordre-de-reparation-edit works!</p>
<!--<pre>{{obj|json}}</pre>
<pre>form to submit:{{formData.value|json}}</pre>
<form [formGroup]="formData" autocomplete="off">
  <br>-->
<!--<mat-form-field appearance="outline">-->
<!--<mat-form-field appearance="outline" [floatLabel]="'never'">
    <mat-select formControlName="client" placeholder="client" (openedChange)="clientInput.focus();" (selectionChange)="voitureListChange($event)">
      <input class="myInput" #clientInput matInput focused="'true'" type="text" (keydown)="$event.stopPropagation()" (keyup)="searchClient($event.target.value);" autocomplete="off" placeholder="search">
      <mat-divider></mat-divider>
      <mat-option>None</mat-option>
      <mat-option *ngFor="let item of clientListfiltred" [value]="item.id">{{item.nomPrenom}} : {{item.solde}}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline" [floatLabel]="'never'">
    <mat-select formControlName="voiture" placeholder="voiture" (openedChange)="voitureInput.focus()">
      <input class="myInput" matInput #voitureInput focused="'true'" type="text" autocomplete="off" placeholder="search">
      <mat-divider></mat-divider>
      <mat-option *ngFor="let item of voitureListFiltred" [value]="item.id">{{item.matricule}}</mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field>
    <input type="date" matInput formControlName="dateDocument" required placeholder="date">
    <mat-error>fff</mat-error>
  </mat-form-field><br><br>
  <mat-form-field>
    <input matInput formControlName="kilometrage" required placeholder="kilometrage">
    <mat-error>fff</mat-error>
  </mat-form-field><br><br>
  <mat-form-field>
    <input matInput formControlName="commentaireInterne" placeholder="commentaireInterne">
    <mat-error>fff</mat-error>
  </mat-form-field><br><br>
  <mat-form-field>
    <input matInput formControlName="commentaireExterne" placeholder="commentaireExterne">
    <mat-error>fff</mat-error>
  </mat-form-field><br><br>

  <div formArrayName="detailleOr">

    <table class="table table-bordered table-hover" id="tab_logic">
      <thead>
        <tr>
          <th class="text-center">
            #
          </th>
          <th class="text-center">
            Name
          </th>
          <th class="text-center">
            Mail
          </th>
          <th class="text-center">
            Mobile
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let itemx of detailleOrForms.controls; let i=index" [formGroupName]="i">
          <td style="vertical-align:middle">
            <mat-form-field>
              <mat-select formControlName="article">
                <mat-option *ngFor="let item of articleList" [value]="item.id">{{item.reference}}</mat-option>
              </mat-select>
            </mat-form-field>
          </td>
          <td style="vertical-align:middle">
            <mat-form-field>
              <input matInput placeholder="prixHt" formControlName="prixHt" (input)="calculTtc(i)">
            </mat-form-field>
          </td>
          <td style="vertical-align:middle">
            <mat-form-field>
              <input matInput placeholder="quantite" formControlName="quantite" (input)="calculTtc(i)">
            </mat-form-field>
          </td>
          <td style="vertical-align:middle">
            <mat-form-field>
              <input matInput placeholder="remise" formControlName="remise" (input)="calculTtc(i)">
            </mat-form-field>
          </td>
          <td style="vertical-align:middle">
            <mat-form-field>
              <input matInput placeholder="tva" formControlName="tva" (input)="calculTtc(i)">
            </mat-form-field>
          </td>
          <td style="vertical-align:middle">
            <mat-form-field>
              <input matInput placeholder="totalTtc" formControlName="totalTtc" (input)="calculMarge(i)">
            </mat-form-field>
          </td>
          <td style="vertical-align:middle">
            <button mat-raised-button color="warn" (click)="deletedetailleOr(i)">Delete</button>
          </td>

        </tr>
      </tbody>
    </table>

  </div>
  <button mat-raised-button color="primary" (click)="adddetailleOr()">Add Product</button>

</form>


<button mat-raised-button color="primary" [disabled]="formData.invalid" (click)="Edit()" type="submit">
  Modifier
</button>-->




<div class="col-md-12">
  <div class="box box-info">
    <div class="box-header with-border">
      <h3 class="box-title">Modifier Ordre de Réparation</h3>
    </div>
    <!-- /.box-header -->

    <div class="box-body">
      <form [formGroup]="formData" autocomplete="off">

        <!--<mat-form-field appearance="outline">
        <mat-label>Reference</mat-label>-->

        <mat-form-field appearance="outline" [floatLabel]="'never'">
          <mat-select formControlName="client" placeholder="client" (openedChange)="clientInput.focus();" (selectionChange)="voitureListChange($event)">
            <input class="myInput" #clientInput matInput focused="'true'" type="text" (keydown)="$event.stopPropagation()" (keyup)="searchClient($event.target.value);" autocomplete="off" placeholder="search">
            <mat-divider></mat-divider>
            <mat-option>None</mat-option>
            <mat-option *ngFor="let item of clientListfiltred" [value]="item.id">{{item.nomPrenom}} : {{item.solde}}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" [floatLabel]="'never'">
          <mat-select formControlName="voiture" placeholder="voiture" (openedChange)="voitureInput.focus()">
            <input class="myInput" matInput #voitureInput focused="'true'" type="text" autocomplete="off" placeholder="search">
            <mat-divider></mat-divider>
            <mat-option *ngFor="let item of voitureListFiltred" [value]="item.id">{{item.matricule}}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>date</mat-label>
          <input type="date" matInput formControlName="dateDocument" required placeholder="date">
          <mat-error>fff</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>kilometrage</mat-label>
          <input matInput formControlName="kilometrage" required placeholder="kilometrage">
          <mat-error>fff</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>commentaire interne</mat-label>
          <input matInput formControlName="commentaireInterne" placeholder="commentaireInterne">
          <mat-error>fff</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>commentaire externe</mat-label>
          <input matInput formControlName="commentaireExterne" placeholder="commentaireExterne">
          <mat-error>fff</mat-error>
        </mat-form-field>

        <div formArrayName="detailleOr">

          <div *ngFor="let itemx of detailleOrForms.controls; let i=index" [formGroupName]="i" class="">

            <mat-form-field [floatLabel]="'never'">
              <mat-select required formControlName="article" placeholder="Article" (openedChange)="ArticleInput.focus()" (selectionChange)="changePrix(i,$event);calculTtc(i);articleListdefault()">
                <input class="myInput" #ArticleInput matInput focused="'true'" type="text" (keydown)="$event.stopPropagation()" (keyup)="searchArticle($event.target.value)" autocomplete="off" placeholder="search">
                <mat-divider></mat-divider>
                <mat-option *ngFor="let item of articleListFiltred" prix="item.prixPublic" [value]="item.id">{{item.reference}} {{item.designation}}</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>designation</mat-label>
              <input matInput placeholder="designation" formControlName="designation" readonly>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>prixHt</mat-label>
              <input type="number" matInput placeholder="prixHt" formControlName="prixHt" (keyup)="HorsTaxToTTC($event,i)" (input)="calculTtc(i)">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>quantite</mat-label>
              <input matInput placeholder="quantite" formControlName="quantite" (input)="calculTtc(i)">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>remise %</mat-label>
              <input matInput placeholder="remise" formControlName="remise" (input)="calculTtc(i)">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>TVA</mat-label>
              <input matInput placeholder="tva" formControlName="tva" (input)="calculTtc(i)">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Total TTC</mat-label>
              <input matInput readonly placeholder="totalTtc" formControlName="totalTtc" (input)="calculMarge(i)">
            </mat-form-field>

            <button mat-raised-button color="warn" (click)="deletedetailleOr(i)" class="pull-right">Delete</button>

          </div>
          <div class="d-flex justify-content-center"><button mat-raised-button color="primary" (click)="adddetailleOr()">Add Product</button></div>

          <br /><br />
        </div>

      </form>
    </div>
    <!-- /.box-body -->
    <div class="box-footer">

      <button mat-raised-button color="primary" [disabled]="formData.invalid" (click)="Edit()" type="submit">
        Modifier
      </button>

    </div>
    <!-- /.box-footer -->

  </div>

</div>


<!--<div bsModal #paymentModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Confirmer</h4>
        <button type="button" class="close" (click)="paymentModal.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Voulez vous confirmer le paiement en espèce et imprimer?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="passerAuPaiement()">Non passerAuPaiement</button>
        <button type="button" class="btn btn-primary" (click)="payerEnEspeceEtImprimer()">oui</button>
      </div>
    </div>
  </div>
</div>-->
